{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/decor.js","../src/img/err.svg","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst pixabayApi = async (searchrequest, pageNumber, onEachPage) => {\n  try {\n    return await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: '44302589-5a2329cbe5164dd3461a63194',\n        q: searchrequest,\n        page: pageNumber,\n        per_page: onEachPage,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    });\n  } catch (error) {\n    gallery.innerHTML =\n      'Something went wrong. <br/>Error happend during request.';\n    console.error(error);\n  }\n};\n\nexport default pixabayApi;\n","'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst render = (pictures, placeForContent) => {\n  placeForContent.insertAdjacentHTML('beforeend', makeMarkUp(pictures));\n  simpleGallery.refresh();\n};\nexport default render;\n\nconst simpleGallery = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsimpleGallery.on('error.simplelightbox', function (e) {\n  console.log(e);\n});\n\nfunction makeMarkUp(pictures) {\n  return pictures.reduce(\n    (\n      acc,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      (acc += `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${largeImageURL}\" \n          alt=\"${tags}\"\n        />\n        <div class=\"picture-describe\">\n        <span><span class=\"title\">Likes</span>${likes}</span>\n        <span><span class=\"title\">Views</span>${views}</span>\n        <span><span class=\"title\">Comments</span>${comments}</span>\n        <span><span class=\"title\">Downloads</span>${downloads}</span>\n        </div>\n      </a>\n    </li>`),\n    ``\n  );\n}\n","function decor(colorSwitcher) {\n  colorSwitcher.firstElementChild.checked =\n    JSON.parse(localStorage.getItem('black')) ?? false;\n\n  if (colorSwitcher.firstElementChild.checked) {\n    switchColors();\n  }\n\n  colorSwitcher.addEventListener('click', e => {\n    colorSwitcher.firstElementChild.checked =\n      !colorSwitcher.firstElementChild.checked;\n    localStorage.setItem(\n      'black',\n      JSON.stringify(colorSwitcher.firstElementChild.checked)\n    );\n\n    switchColors();\n  });\n\n  function switchColors() {\n    document.body.classList.toggle('black');\n    document.body.firstElementChild.classList.toggle('black');\n    document.getElementById('searchrequest').classList.toggle('black');\n  }\n\n  setTimeout(() => {\n    colorSwitcher.style.opacity = '0.1';\n  }, 5000);\n}\nexport default decor;\n","export default \"__VITE_ASSET__33588f56__\"","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport pixabayApi from './js/pixabay-api';\nimport render from './js/render-functions';\nimport decor from './js/decor';\n\nimport iconErr from './img/err.svg';\n\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.getElementById('loadMore');\n\nlet searchrequest;\nlet pageNumber;\nconst onEachPage = 15;\n\nloadMoreBtn.addEventListener('click', e => {\n  pageNumber++;\n  request();\n  setTimeout(() => {\n    const card = document.querySelector('li.gallery-item');\n    window.scrollBy(0, 2 * card.getBoundingClientRect().height);\n  }, 1000);\n});\n\ndocument.querySelector('form').addEventListener('submit', event => {\n  event.preventDefault();\n  pageNumber = 1;\n  searchrequest = event.target.searchrequest.value;\n  gallery.innerHTML = '';\n  request();\n  event.target.reset();\n});\n\nasync function request() {\n  loadMoreBtn.textContent = '';\n  loadMoreBtn.classList.remove('blue-btn');\n  loadMoreBtn.classList.add('loader');\n  await pixabayApi(searchrequest, pageNumber, onEachPage)\n    .then(({ data, status, statusText, headers, config }) => {\n      if (data.hits.length === 0) {\n        iziToast.error(errMessage);\n        return;\n      } else render(data.hits, gallery);\n      if (data.totalHits > pageNumber * 15) {\n        loadMoreBtn.classList.add('blue-btn');\n        loadMoreBtn.textContent = 'Load more';\n      } else {\n        loadMoreBtn.classList.remove('blue-btn');\n        iziToast.info({\n          position: 'topRight',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .catch(error => {\n      gallery.innerHTML =\n        'Something went wrong. <br/>Please, check your connection and try again.';\n      console.error(error);\n      loadMoreBtn.classList.add('blue-btn');\n      loadMoreBtn.innerHTML = '<a href=\"/\">Refreash page</a>';\n    });\n  loadMoreBtn.classList.remove('loader');\n}\n\nconst errMessage = {\n  position: 'topRight',\n  theme: 'dark',\n  iconUrl: iconErr,\n  color: '#ef4040',\n  message:\n    'Sorry, there are no images matching <br/>your search query. Please try again!',\n};\n\ndecor(document.querySelector('.slide'));\n"],"names":["pixabayApi","searchrequest","pageNumber","onEachPage","axios","error","render","pictures","placeForContent","makeMarkUp","simpleGallery","SimpleLightbox","acc","webformatURL","largeImageURL","tags","likes","views","comments","downloads","decor","colorSwitcher","switchColors","e","iconErr","gallery","loadMoreBtn","request","card","event","data","status","statusText","headers","config","iziToast","errMessage"],"mappings":"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"}